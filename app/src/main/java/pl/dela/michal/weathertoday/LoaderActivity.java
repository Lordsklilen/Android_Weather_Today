package pl.dela.michal.weathertoday;

import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.os.Handler;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.util.Log;
import android.widget.TextView;

import java.util.Locale;

public class LoaderActivity extends AppCompatActivity {
    private String FAKE_JSON5DAYS = "{\"Headline\":{\"EffectiveDate\":\"2018-06-03T08:00:00+02:00\",\"EffectiveEpochDate\":1528005600,\"Severity\":4,\"Text\":\"Thunderstorms in the area Sunday morning through Sunday evening; storms can cause flash flooding\",\"Category\":\"thunderstorm\",\"EndDate\":\"2018-06-04T02:00:00+02:00\",\"EndEpochDate\":1528070400,\"MobileLink\":\"http://m.accuweather.com/en/pl/zabierzow/274433/extended-weather-forecast/274433?unit=c&lang=en-us\",\"Link\":\"http://www.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?unit=c&lang=en-us\"},\"DailyForecasts\":[{\"Date\":\"2018-06-03T07:00:00+02:00\",\"EpochDate\":1528002000,\"Temperature\":{\"Minimum\":{\"Value\":13.8,\"Unit\":\"C\",\"UnitType\":17},\"Maximum\":{\"Value\":23.6,\"Unit\":\"C\",\"UnitType\":17}},\"Day\":{\"Icon\":16,\"IconPhrase\":\"Mostly cloudy w/ t-storms\"},\"Night\":{\"Icon\":41,\"IconPhrase\":\"Partly cloudy w/ t-storms\"},\"Sources\":[\"AccuWeather\"],\"MobileLink\":\"http://m.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=1&unit=c&lang=en-us\",\"Link\":\"http://www.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=1&unit=c&lang=en-us\"},{\"Date\":\"2018-06-04T07:00:00+02:00\",\"EpochDate\":1528088400,\"Temperature\":{\"Minimum\":{\"Value\":13.2,\"Unit\":\"C\",\"UnitType\":17},\"Maximum\":{\"Value\":25.7,\"Unit\":\"C\",\"UnitType\":17}},\"Day\":{\"Icon\":17,\"IconPhrase\":\"Partly sunny w/ t-storms\"},\"Night\":{\"Icon\":36,\"IconPhrase\":\"Intermittent clouds\"},\"Sources\":[\"AccuWeather\"],\"MobileLink\":\"http://m.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=2&unit=c&lang=en-us\",\"Link\":\"http://www.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=2&unit=c&lang=en-us\"},{\"Date\":\"2018-06-05T07:00:00+02:00\",\"EpochDate\":1528174800,\"Temperature\":{\"Minimum\":{\"Value\":10.0,\"Unit\":\"C\",\"UnitType\":17},\"Maximum\":{\"Value\":24.9,\"Unit\":\"C\",\"UnitType\":17}},\"Day\":{\"Icon\":17,\"IconPhrase\":\"Partly sunny w/ t-storms\"},\"Night\":{\"Icon\":35,\"IconPhrase\":\"Partly cloudy\"},\"Sources\":[\"AccuWeather\"],\"MobileLink\":\"http://m.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=3&unit=c&lang=en-us\",\"Link\":\"http://www.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=3&unit=c&lang=en-us\"},{\"Date\":\"2018-06-06T07:00:00+02:00\",\"EpochDate\":1528261200,\"Temperature\":{\"Minimum\":{\"Value\":8.7,\"Unit\":\"C\",\"UnitType\":17},\"Maximum\":{\"Value\":20.5,\"Unit\":\"C\",\"UnitType\":17}},\"Day\":{\"Icon\":2,\"IconPhrase\":\"Mostly sunny\"},\"Night\":{\"Icon\":36,\"IconPhrase\":\"Intermittent clouds\"},\"Sources\":[\"AccuWeather\"],\"MobileLink\":\"http://m.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=4&unit=c&lang=en-us\",\"Link\":\"http://www.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=4&unit=c&lang=en-us\"},{\"Date\":\"2018-06-07T07:00:00+02:00\",\"EpochDate\":1528347600,\"Temperature\":{\"Minimum\":{\"Value\":13.6,\"Unit\":\"C\",\"UnitType\":17},\"Maximum\":{\"Value\":24.8,\"Unit\":\"C\",\"UnitType\":17}},\"Day\":{\"Icon\":4,\"IconPhrase\":\"Intermittent clouds\"},\"Night\":{\"Icon\":34,\"IconPhrase\":\"Mostly clear\"},\"Sources\":[\"AccuWeather\"],\"MobileLink\":\"http://m.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=5&unit=c&lang=en-us\",\"Link\":\"http://www.accuweather.com/en/pl/zabierzow/274433/daily-weather-forecast/274433?day=5&unit=c&lang=en-us\"}]}";
    private String FAKE_JSON12_HOURS = "[  {    \"DateTime\": \"2018-06-04T11:00:00+02:00\",    \"EpochDateTime\": 1528102800,    \"WeatherIcon\": 16,    \"IconPhrase\": \"Mostly cloudy w/ t-storms\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 21.7,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 51,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=11&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T12:00:00+02:00\",    \"EpochDateTime\": 1528106400,    \"WeatherIcon\": 3,    \"IconPhrase\": \"Partly sunny\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 23,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 47,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=12&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T13:00:00+02:00\",    \"EpochDateTime\": 1528110000,    \"WeatherIcon\": 2,    \"IconPhrase\": \"Mostly sunny\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 23.9,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 43,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=13&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T14:00:00+02:00\",    \"EpochDateTime\": 1528113600,    \"WeatherIcon\": 2,    \"IconPhrase\": \"Mostly sunny\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 24.7,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 43,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=14&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T15:00:00+02:00\",    \"EpochDateTime\": 1528117200,    \"WeatherIcon\": 2,    \"IconPhrase\": \"Mostly sunny\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 25.1,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 47,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=15&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T16:00:00+02:00\",    \"EpochDateTime\": 1528120800,    \"WeatherIcon\": 17,    \"IconPhrase\": \"Partly sunny w/ t-storms\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 25,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 51,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=16&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T17:00:00+02:00\",    \"EpochDateTime\": 1528124400,    \"WeatherIcon\": 3,    \"IconPhrase\": \"Partly sunny\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 25.9,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 47,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=17&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T18:00:00+02:00\",    \"EpochDateTime\": 1528128000,    \"WeatherIcon\": 3,    \"IconPhrase\": \"Partly sunny\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 25.2,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 47,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=18&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T19:00:00+02:00\",    \"EpochDateTime\": 1528131600,    \"WeatherIcon\": 17,    \"IconPhrase\": \"Partly sunny w/ t-storms\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 23.1,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 51,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=19&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T20:00:00+02:00\",    \"EpochDateTime\": 1528135200,    \"WeatherIcon\": 3,    \"IconPhrase\": \"Partly sunny\",    \"IsDaylight\": true,    \"Temperature\": {      \"Value\": 22.1,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 43,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=20&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T21:00:00+02:00\",    \"EpochDateTime\": 1528138800,    \"WeatherIcon\": 41,    \"IconPhrase\": \"Partly cloudy w/ t-storms\",    \"IsDaylight\": false,    \"Temperature\": {      \"Value\": 21.1,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 51,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=21&unit=c&lang=en-us\"  },  {    \"DateTime\": \"2018-06-04T22:00:00+02:00\",    \"EpochDateTime\": 1528142400,    \"WeatherIcon\": 35,    \"IconPhrase\": \"Partly cloudy\",    \"IsDaylight\": false,    \"Temperature\": {      \"Value\": 20,      \"Unit\": \"C\",      \"UnitType\": 17    },    \"PrecipitationProbability\": 47,    \"MobileLink\": \"http://m.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&unit=c&lang=en-us\",    \"Link\": \"http://www.accuweather.com/en/pl/zabierzow/274433/hourly-weather-forecast/274433?day=1&hbhhour=22&unit=c&lang=en-us\"  }]";
    private String FAKE_JSON24_HISTORICAL_HOURS = "[  {    \"LocalObservationDateTime\": \"2018-06-04T11:55:00+02:00\",    \"EpochTime\": 1528106100,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 22.8,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 73,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T10:55:00+02:00\",    \"EpochTime\": 1528102500,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 22.2,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 72,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T09:55:00+02:00\",    \"EpochTime\": 1528098900,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 21.1,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 70,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T08:55:00+02:00\",    \"EpochTime\": 1528095300,    \"WeatherText\": \"Słonecznie\",    \"WeatherIcon\": 1,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 18.9,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 66,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T07:55:00+02:00\",    \"EpochTime\": 1528091700,    \"WeatherText\": \"Lekka mgła\",    \"WeatherIcon\": 11,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 16.1,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 61,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T06:55:00+02:00\",    \"EpochTime\": 1528088100,    \"WeatherText\": \"Mgła\",    \"WeatherIcon\": 11,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 15,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 59,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T06:05:00+02:00\",    \"EpochTime\": 1528085100,    \"WeatherText\": \"Mgła\",    \"WeatherIcon\": 11,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 15,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 59,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T04:55:00+02:00\",    \"EpochTime\": 1528080900,    \"WeatherText\": \"Lekka mgła\",    \"WeatherIcon\": 11,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 15,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 59,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T03:55:00+02:00\",    \"EpochTime\": 1528077300,    \"WeatherText\": \"Lekka mgła\",    \"WeatherIcon\": 11,    \"IsDayTime\": false,    \"Temperature\": {      \"Metric\": {        \"Value\": 15,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 59,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T02:55:00+02:00\",    \"EpochTime\": 1528073700,    \"WeatherText\": \"Lekka mgła\",    \"WeatherIcon\": 11,    \"IsDayTime\": false,    \"Temperature\": {      \"Metric\": {        \"Value\": 15,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 59,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T01:55:00+02:00\",    \"EpochTime\": 1528070100,    \"WeatherText\": \"Lekka mgła\",    \"WeatherIcon\": 11,    \"IsDayTime\": false,    \"Temperature\": {      \"Metric\": {        \"Value\": 16.1,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 61,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T01:05:00+02:00\",    \"EpochTime\": 1528067100,    \"WeatherText\": \"Bezchmurnie\",    \"WeatherIcon\": 33,    \"IsDayTime\": false,    \"Temperature\": {      \"Metric\": {        \"Value\": 16.1,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 61,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-04T00:05:00+02:00\",    \"EpochTime\": 1528063500,    \"WeatherText\": \"Bezchmurnie\",    \"WeatherIcon\": 33,    \"IsDayTime\": false,    \"Temperature\": {      \"Metric\": {        \"Value\": 17.2,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 63,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T23:05:00+02:00\",    \"EpochTime\": 1528059900,    \"WeatherText\": \"Bezchmurnie\",    \"WeatherIcon\": 33,    \"IsDayTime\": false,    \"Temperature\": {      \"Metric\": {        \"Value\": 17.8,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 64,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T21:55:00+02:00\",    \"EpochTime\": 1528055700,    \"WeatherText\": \"Zachmurzenie duże\",    \"WeatherIcon\": 38,    \"IsDayTime\": false,    \"Temperature\": {      \"Metric\": {        \"Value\": 20,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 68,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T20:55:00+02:00\",    \"EpochTime\": 1528052100,    \"WeatherText\": \"Bezchmurnie\",    \"WeatherIcon\": 33,    \"IsDayTime\": false,    \"Temperature\": {      \"Metric\": {        \"Value\": 20,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 68,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T19:55:00+02:00\",    \"EpochTime\": 1528048500,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 22.2,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 72,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T18:55:00+02:00\",    \"EpochTime\": 1528044900,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 22.8,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 73,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T17:55:00+02:00\",    \"EpochTime\": 1528041300,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 23.9,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 75,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T16:55:00+02:00\",    \"EpochTime\": 1528037700,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 23.9,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 75,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T15:55:00+02:00\",    \"EpochTime\": 1528034100,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 23.9,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 75,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T14:55:00+02:00\",    \"EpochTime\": 1528030500,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 22.2,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 72,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T13:55:00+02:00\",    \"EpochTime\": 1528026900,    \"WeatherText\": \"Częściowo słonecznie\",    \"WeatherIcon\": 3,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 21.1,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 70,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  },  {    \"LocalObservationDateTime\": \"2018-06-03T12:55:00+02:00\",    \"EpochTime\": 1528023300,    \"WeatherText\": \"Zachmurzenie duże\",    \"WeatherIcon\": 6,    \"IsDayTime\": true,    \"Temperature\": {      \"Metric\": {        \"Value\": 20,        \"Unit\": \"C\",        \"UnitType\": 17      },      \"Imperial\": {        \"Value\": 68,        \"Unit\": \"F\",        \"UnitType\": 18      }    },    \"MobileLink\": \"http://m.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\",    \"Link\": \"http://www.accuweather.com/pl/pl/zabierzow/274433/current-weather/274433\"  }]";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_loader);
        SharedPreferences storage = getSharedPreferences("Data", 0);
        String firstUsage = storage.getString("firstUsage", "0");
        //nowości
       // SharedPreferences.Editor storageEditor1 = storage.edit();

        //storageEditor1.apply();
        //starości
        if(firstUsage.equals("0")){
            SharedPreferences.Editor storageEditor = storage.edit();
            storageEditor.putString("5days", FAKE_JSON5DAYS);
            storageEditor.putString("12hours", FAKE_JSON12_HOURS);
            storageEditor.putString("24hourhistory", FAKE_JSON24_HISTORICAL_HOURS);
            storageEditor.putString("language", "pl");
            storageEditor.putString("LocalizedName", "Zabierzów");
            storageEditor.putString("Country", "Polska");
            storageEditor.putString("AdministrativeArea", "Małopolskie");
            storageEditor.putString("Key", "274433");
            storageEditor.putString("firstUsage", "1");
            storageEditor.apply();
            Log.i("init","storage has been initiated");
            NetworkUtils.UpdatePreferences(this);
        }
        else {
            String lang = storage.getString("language", "0");
            if(!firstUsage.equals("0"))
                setLocale(lang);
            Log.i("init","storage has been loaded");
            NetworkUtils.UpdatePreferences(this);
        }

        Runnable r = new Runnable() {
            @Override
            public void run(){
                goToMenu();
            }
        };
        Runnable c = new Runnable() {
            @Override
            public void run(){
                closeActivity();
            }
        };

        Handler h = new Handler();
        h.postDelayed(r, 1000);
        h.postDelayed(c, 1100);
    }
    public void setLocale(String lang) {
        Log.i("init","language has been changed");
        Locale myLocale = new Locale(lang);
        Resources res = getResources();
        DisplayMetrics dm = res.getDisplayMetrics();
        Configuration conf = res.getConfiguration();
        conf.locale = myLocale;
        res.updateConfiguration(conf, dm);
    }
    void goToMenu(){
        startActivity(new Intent(LoaderActivity.this, MenuActivity.class));
    }
    void closeActivity(){
        finish();
    }

}
